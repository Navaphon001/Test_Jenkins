pipeline {
  agent any

  parameters {
    booleanParam(
      name: 'RUN_DEPLOY',
      defaultValue: true,
      description: 'Should we deploy?'
    )
  }

  stages {
    stage('Build') {
      steps {
        echo 'Building application...'
      }
    }

    stage('Test') {
      steps {
        echo 'Running tests...'
      }
    }

    stage('Deploy') {
      when {
        expression { return params.RUN_DEPLOY }
      }
      steps {
        echo 'Deploying application...'
      }
    }
  }

  post {
    success { echo 'Pipeline completed successfully 🎉' }
    failure { echo 'Pipeline failed ❌' }
  }
}
