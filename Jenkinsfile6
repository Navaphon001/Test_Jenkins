pipeline {
  agent any

  parameters {
    booleanParam(
      name: 'RUN_DEPLOY',
      defaultValue: true,
      description: 'Should we deploy?'
    )
  }

  stages {
    stage('Build') {
      steps {
        echo 'Building application...'
      }
    }

    stage('Test') {
      steps {
        sh 'echo "All tests passed!" > results.txt'
        archiveArtifacts artifacts: 'results.txt', fingerprint: true
      }
    }

    stage('Approval') {
      when {
        expression { return params.RUN_DEPLOY }
      }
      steps {
        // âœ… Jenkins à¸ˆà¸°à¸«à¸¢à¸¸à¸”à¸£à¸­à¹ƒà¸«à¹‰à¸à¸”à¸›à¸¸à¹ˆà¸¡ Approve à¸«à¸£à¸·à¸­ Abort
        input "Do you want to proceed with deployment?"
      }
    }

    stage('Deploy') {
      when {
        expression { return params.RUN_DEPLOY }
      }
      steps {
        echo 'Deploying application...'
      }
    }
  }

  post {
    success { echo 'Pipeline completed successfully ğŸ‰' }
    failure { echo 'Pipeline failed âŒ' }
  }
}
