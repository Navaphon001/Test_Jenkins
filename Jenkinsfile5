pipeline {
  agent any

  parameters {
    booleanParam(
      name: 'RUN_DEPLOY',
      defaultValue: true,
      description: 'Should we deploy?'
    )
  }

  stages {
    stage('Build') {
      steps {
        echo 'Building application...'
      }
    }

    stage('Test') {
      steps {
        // ‚úÖ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå
        sh 'echo "All tests passed!" > results.txt'

        // ‚úÖ ‡πÄ‡∏Å‡πá‡∏ö‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏õ‡πá‡∏ô artifact
        archiveArtifacts artifacts: 'results.txt', fingerprint: true
      }
    }

    stage('Deploy') {
      when {
        expression { return params.RUN_DEPLOY }
      }
      steps {
        echo 'Deploying application...'
      }
    }
  }

  post {
    success { echo 'Pipeline completed successfully üéâ' }
    failure { echo 'Pipeline failed ‚ùå' }
  }
}
